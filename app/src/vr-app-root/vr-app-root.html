<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/apollo-client/graphql-client.html" />
<link rel="import" href="../../bower_components/apollo-client/graphql-query.html" />
<script src="../../bower_components/apollo-client/build/apollo-client.js"></script>

<dom-module id="vr-app-root">
  <template>
    <style>
      :host {
        display: block;
        background: #f3f3f3;
        padding: 1em;
        margin: 0;
      }
    </style>

    <h1>Tutorials ([[data.length]])</h1>
    <ul>
      <template is="dom-repeat" items="[[data]]">
        <li>[[item.attributes.title]]</li>
      </template>
    </ul>

    <graphql-client config='{ "uri": "http://localhost/graphql" }'></graphql-client>
    <graphql-query result="{{starShipData}}">
    query {
      nodeQuery(offset: 0, limit:100, filter: { type: "Tutorial"}) {
        count
        entities {
          uuid: entityUuid
          ... on NodeTutorial {
            summary: fieldSummary {
              value: processed
            }
            image: fieldImage  {
              ... on FieldNodeFieldImage {
                entity {
                  thumbnail {
                    alt
                    title
                    style: derivative(style: "large") {
                      url
                    }
                  }
                } 
              }
            }
            uid {
              entity {
                name
              }
            }
          }
        }
      }
    }
    </graphql-query>

  </template>

  <script>
    Polymer({

      is: 'vr-app-root',

      properties: {
      },

      /**
       * Listen for request for getScene
       */
      __getTutorialsHandler: function (e) {
        this.data = e.detail.response.data;
      },

    });
  </script>
</dom-module>